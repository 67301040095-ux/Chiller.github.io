<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Chiller Management System - 2D SCADA</title>
<style>
body{
  margin:0;
  background:white;
  font-family:Segoe UI,Arial;
  overflow:hidden;
}
svg{
  width:1920px;
  height:1080px;
  display:block;
  margin:auto;
}

/* Equipment */
.chiller{fill:#d9dee4;stroke:#555;stroke-width:3}
.tower{fill:#cfd6dd;stroke:#555;stroke-width:3}
.pump{fill:#2ecc71;stroke:#222;stroke-width:2}
.pump.off{fill:#b0b0b0}
.pipeCW{stroke:#d6a04b;stroke-width:14;fill:none}
.pipeCHWS{stroke:#00bfff;stroke-width:14;fill:none}
.pipeCHWR{stroke:#6c63ff;stroke-width:14;fill:none}
.flow{stroke-dasharray:20;animation:flow 1s linear infinite}
@keyframes flow{from{stroke-dashoffset:0}to{stroke-dashoffset:-40}}

.tag{font-size:20px;fill:#111}
.header{font-size:30px;font-weight:bold}

.panel{
 position:absolute;
 top:20px;
 right:20px;
 background:#f4f6f8;
 padding:20px;
 border-radius:10px;
 box-shadow:0 4px 10px rgba(0,0,0,.2);
}
button{padding:8px 16px;margin:5px}
.alarm{color:red;font-weight:bold}
</style>
</head>
<body>

<svg viewBox="0 0 1920 1080">

<text x="650" y="60" class="header">CHILLER MANAGEMENT SYSTEM</text>

<!-- Cooling Towers -->
<rect x="150" y="150" width="200" height="200" class="tower"/>
<rect x="400" y="150" width="200" height="200" class="tower"/>
<text x="180" y="140" class="tag">CT-01</text>
<text x="430" y="140" class="tag">CT-02</text>

<!-- Condenser Pumps -->
<circle cx="200" cy="750" r="35" class="pump" id="CDP1"/>
<circle cx="350" cy="750" r="35" class="pump" id="CDP2"/>
<circle cx="500" cy="750" r="35" class="pump" id="CDP3"/>
<text x="150" y="820" class="tag">CDP-01</text>
<text x="300" y="820" class="tag">CDP-02</text>
<text x="450" y="820" class="tag">CDP-03</text>

<!-- Chillers -->
<rect x="750" y="500" width="300" height="150" class="chiller"/>
<rect x="1150" y="500" width="300" height="150" class="chiller"/>
<text x="820" y="480" class="tag">CH-01</text>
<text x="1220" y="480" class="tag">CH-02</text>

<!-- CHW Pumps -->
<circle cx="900" cy="900" r="35" class="pump" id="CHP1"/>
<circle cx="1050" cy="900" r="35" class="pump" id="CHP2"/>
<circle cx="1200" cy="900" r="35" class="pump" id="CHP3"/>
<text x="850" y="970" class="tag">CHP-01</text>
<text x="1000" y="970" class="tag">CHP-02</text>
<text x="1150" y="970" class="tag">CHP-03</text>

<!-- Building Return -->
<rect x="1650" y="550" width="200" height="120" fill="#e2e8f0" stroke="#555" stroke-width="3"/>
<text x="1660" y="530" class="tag">BUILDING RETURN</text>

<!-- Pipes -->
<line x1="250" y1="350" x2="250" y2="715" class="pipeCW flow"/>
<line x1="350" y1="350" x2="350" y2="715" class="pipeCW flow"/>

<line x1="250" y1="750" x2="900" y2="575" class="pipeCW flow"/>
<line x1="1050" y1="575" x2="1650" y2="575" class="pipeCHWS flow"/>
<line x1="1650" y1="630" x2="900" y2="900" class="pipeCHWR flow"/>

<!-- Tags -->
<text x="1000" y="520" class="tag">Supply Temp: <tspan id="temp">45°F</tspan></text>
<text x="1000" y="560" class="tag">Flow: <tspan id="flow">600 gpm</tspan></text>
<text x="1000" y="600" class="tag">Plant kW: <tspan id="kw">250</tspan></text>

</svg>

<div class="panel">
<button onclick="start()">START</button>
<button onclick="stop()">STOP</button>
<button onclick="resetAlarm()">RESET</button>
<br><br>
Load %
<input type="range" min="10" max="100" value="50" id="load">
<br><br>
Alarm: <span id="alarmText">NONE</span>
</div>

<script>
let running=false
let alarm=false
let temp=45
const cutOut=41
const restart=44

function start(){
 if(!alarm) running=true
}
function stop(){
 running=false
}
function resetAlarm(){
 alarm=false
 document.getElementById("alarmText").innerText="NONE"
}

setInterval(()=>{
 let load=document.getElementById("load").value

 if(running && !alarm){
   temp -= 0.08
   temp += load/2000

   if(temp<=cutOut){
     alarm=true
     running=false
     document.getElementById("alarmText").innerText="LOW TEMP TRIP"
     document.getElementById("alarmText").className="alarm"
   }
 }

 if(!running && !alarm && temp>=restart){
   running=true
 }

 document.getElementById("temp").innerText=temp.toFixed(1)+"°F"
 document.getElementById("flow").innerText=(load*10).toFixed(0)+" gpm"
 document.getElementById("kw").innerText=(load*5).toFixed(0)

},1000)
</script>

</body>
</html>
